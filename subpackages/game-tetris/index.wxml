<!-- 俄罗斯方块游戏页 -->
<view class="container" style="background: {{theme.pageBg}};">
  <!-- 头部信息 -->
  <view class="header">
    <view class="stats">
      <view class="stat-box" style="background: {{theme.headerCardBg}};">
        <text class="stat-label" style="color: {{theme.headerTextLight}};">分数</text>
        <text class="stat-value" style="color: {{theme.headerTextWhite}};">{{score}}</text>
      </view>
      <view class="stat-box" style="background: {{theme.headerCardBg}};">
        <text class="stat-label" style="color: {{theme.headerTextLight}};">等级</text>
        <text class="stat-value" style="color: {{theme.headerTextWhite}};">{{level}}</text>
      </view>
      <view class="stat-box" style="background: {{theme.headerCardBg}};">
        <text class="stat-label" style="color: {{theme.headerTextLight}};">消除行</text>
        <text class="stat-value" style="color: {{theme.headerTextWhite}};">{{lines}}</text>
      </view>
    </view>
  </view>

  <!-- 游戏区域 -->
  <view class="game-area">
    <!-- 游戏画布和右侧面板容器 -->
    <view class="canvas-area">
      <!-- 游戏画布 -->
      <view class="canvas-wrapper">
        <canvas
          type="2d"
          id="gameCanvas"
          class="game-canvas"
          style="width: {{gameCanvasWidth}}px; height: {{gameCanvasHeight}}px;"
        ></canvas>
        <view class="pause-overlay" wx:if="{{isPaused}}">暂停中</view>
      </view>

      <!-- 右侧面板 -->
      <view class="right-panel">
        <!-- 下一个方块预览 -->
        <view class="next-wrapper">
          <canvas
            type="2d"
            id="nextCanvas"
            class="next-canvas"
          ></canvas>
        </view>
        <!-- 暂停按钮 -->
        <view class="btn-pause" bindtap="togglePause">{{isPaused ? '▶' : '⏸'}}</view>
      </view>
    </view>
  </view>

  <!-- 控制按钮 -->
  <view class="controls">
    <button
      class="btn btn-left"
      catchtouchstart="onBtnLeft"
      catchtouchend="onBtnEnd"
      style="background: linear-gradient(135deg, {{theme.accentFrom}}, {{theme.accentTo}});"
    >◀</button>
    <button
      class="btn btn-rotate"
      catchtouchstart="onBtnRotate"
      catchtouchend="onBtnEnd"
      style="background: linear-gradient(135deg, {{theme.primary}} 0%, {{theme.secondary}} 100%);"
    >旋转</button>
    <button
      class="btn btn-right"
      catchtouchstart="onBtnRight"
      catchtouchend="onBtnEnd"
      style="background: linear-gradient(135deg, {{theme.accentFrom}} 0%, {{theme.accentTo}} 100%);"
    >▶</button>
  </view>
  <view class="btn-down-wrapper">
    <button
      class="btn btn-full"
      catchtouchstart="onBtnDown"
      catchtouchend="onBtnEnd"
      style="background:{{them.warning}}"
    >下落</button>
  </view>
</view>

<!-- 游戏结束弹窗 -->
<view class="game-over" wx:if="{{gameOver}}">
  <view class="game-over-content">
    <text class="game-over-title">游戏结束！</text>
    <text class="game-over-score">最终分数: {{score}}</text>
    <button class="restart-btn" bindtap="restart">再来一局</button>
  </view>
</view>
