<!-- 记忆翻牌游戏 -->
<view class="container" style="background: {{theme.pageBg}};">
  <!-- 头部信息栏 -->
  <view class="header">
    <view class="stat-box" style="background: {{theme.headerCardBg}};">
        <view class="stat-label" style="color: {{theme.headerTextLight}};">关卡</view>
        <view class="stat-value" style="color: {{theme.headerTextWhite}};"> {{currentLevel}}/{{maxLevel}}</view>
    </view>
      <view class="stat-box" style="background: {{theme.headerCardBg}};">
        <view class="stat-label" style="color: {{theme.headerTextLight}};">步数</view>
        <view class="stat-value" style="color: {{theme.headerTextWhite}};">{{moves}}</view>
      </view>
      <view class="stat-box" style="background: {{theme.headerCardBg}};">
        <view class="stat-label" style="color: {{theme.headerTextLight}};">时间</view>
        <view class="stat-value" style="color: {{theme.headerTextWhite}};">{{timeDisplay}}</view>
      </view>
  </view>

  <!-- 控制按钮 -->
  <view class="controls">
    <button
      class="btn btn-small"
      bindtap="resetToFirstLevel"
      style="background: linear-gradient(135deg, {{theme.accentFrom}} 0%, {{theme.accentTo}} 100%);"
    >重置关卡</button>
    <button
      class="btn"
      bindtap="restart"
      style="background: linear-gradient(135deg, {{theme.accentFrom}} 0%, {{theme.accentTo}} 100%);"
    >重新开始</button>
  </view>

  <!-- 游戏棋盘 -->
  <view class="game-board" style="--card-back-from: {{theme.cardBackFrom}}; --card-back-to: {{theme.cardBackTo}}; --card-front-bg: {{theme.cardFront}};">
    <!-- 卡片网格 - 动态列数 -->
    <view class="grid grid-{{gridCols}}">
      <view
        class="card-container"
        wx:for="{{cards}}"
        wx:key="id"
        bindtap="onCardTap"
        data-index="{{index}}"
      >
        <view class="card {{item.isFlipped ? 'flipped' : ''}} {{item.isMatched ? 'matched' : ''}}">
          <!-- 卡片正面（背面图案） -->
          <view class="card-front"></view>
          <!-- 卡片背面（emoji） -->
          <view class="card-back">{{item.emoji}}</view>
        </view>
      </view>
    </view>

    <!-- 胜利覆盖层 -->
    <view class="overlay game-win {{gameWin ? 'show' : ''}}">
      <view class="overlay-content">
        <view class="overlay-title">🎉 恭喜通关!</view>
        <view class="overlay-text">太棒了！</view>
        <view class="overlay-info">关卡 {{currentLevel}} - {{levelName}}</view>
        <view class="overlay-info">步数: {{moves}}</view>
        <view class="overlay-info">用时: {{timeDisplay}}</view>
        <view class="overlay-buttons">
          <button class="btn-restart btn-secondary" bindtap="restart">再来一次</button>
          <button class="btn-restart" bindtap="nextLevel" disabled="{{currentLevel >= maxLevel}}">
            {{currentLevel >= maxLevel ? '已通关全部' : '挑战下一关'}}
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- 操作提示 -->
  <view class="tips" style="color: {{theme.tipsText}};">
    💡 点击卡片翻牌，找到相同图案配对
  </view>
</view>
